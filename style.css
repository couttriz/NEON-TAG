/* Cấu hình chung */
body {
    background-color: #121212;
    color: white;
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    margin: 0;
    overflow: hidden;
    touch-action: none; 
    user-select: none;
}

/* UI Panel */
.ui-panel {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 95%;
    max-width: 800px;
    margin: 5px 0;
}

.score-board {
    text-align: center;
    padding: 5px 10px;
    border-radius: 8px;
    background: #222;
    font-size: 0.8rem;
    min-width: 80px;
}

.p1-board { border: 2px solid #00f2ff; color: #00f2ff; }
.p2-board { border: 2px solid #ff0055; color: #ff0055; }
.score-board h2 { margin: 0; font-size: 1.5rem; }

.status-display h1 { margin: 0; font-size: 1.2rem; color: #ffea00; }
.status-display p { margin: 0; font-size: 0.8rem; }

/* Arena Container */
#arena-container {
    width: 100%;
    display: flex;
    justify-content: center;
    flex-grow: 1;
    align-items: center;
    /* Dành khoảng trống bên dưới cho nút nếu ở mobile */
    max-height: 85vh; 
    transition: max-height 0.3s;
}

#arena {
    width: 800px;
    height: 500px;
    background-color: #1e1e1e;
    border: 4px solid #333;
    position: relative;
    box-shadow: 0 0 30px rgba(0,0,0,0.5);
    overflow: hidden; 
}

/* Responsive Arena: Tự co giãn trên màn nhỏ */
@media (max-width: 820px) {
    #arena {
        width: 98vw;
        height: 55vw; 
        border: 2px solid #333;
    }
}

/* --- QUẢN LÝ HIỂN THỊ (QUAN TRỌNG NHẤT) --- */

/* 1. Mặc định trên PC: */
#dual-controls { 
    display: none; /* Ẩn nút cảm ứng để đẹp màn hình */
}
#pc-instructions {
    display: block; /* Hiện hướng dẫn WASD */
}

/* 2. Trên Mobile/Tablet (Màn hình < 1024px HOẶC có cảm ứng): */
@media (max-width: 1024px), (pointer: coarse) {
    #dual-controls { 
        display: flex; /* Hiện nút cảm ứng */
    }
    #pc-instructions {
        display: none; /* Ẩn hướng dẫn WASD cho đỡ chật */
    }
    #arena-container {
        max-height: 55vh; /* Thu nhỏ sân chơi lại để nhường chỗ cho nút */
    }
}

/* Styles cho Nút cảm ứng */
#dual-controls {
    width: 100%;
    justify-content: space-between;
    padding: 0 20px 10px 20px;
    box-sizing: border-box;
    position: absolute;
    bottom: 5px;
    z-index: 50;
}

.d-pad { display: flex; flex-direction: column; align-items: center; }
.pad-label { font-weight: bold; margin-bottom: 2px; text-shadow: 0 0 5px black; font-size: 0.8rem; }
.d-middle { display: flex; gap: 50px; } 

.d-btn {
    width: 60px; height: 60px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    color: white; font-size: 20px;
    margin: 2px;
    touch-action: manipulation;
    user-select: none; cursor: pointer;
    backdrop-filter: blur(2px);
}

.p1-pad .d-btn:active { background: rgba(0, 242, 255, 0.4); border-color: #00f2ff; }
.p2-pad .d-btn:active { background: rgba(255, 0, 85, 0.4); border-color: #ff0055; }

/* Các thành phần game */
.player { width: 40px; height: 40px; position: absolute; border-radius: 4px; }
#p1 { background-color: #00f2ff; box-shadow: 0 0 10px #00f2ff; }
#p2 { background-color: #ff0055; box-shadow: 0 0 10px #ff0055; }
.chaser { border: 3px solid #fff; transform: scale(1.1); box-shadow: 0 0 25px currentColor !important; z-index: 10; }
.cooldown { opacity: 0.4; }
.wall { position: absolute; background: #444; border: 1px solid #666; }
.powerup { width: 30px; height: 30px; position: absolute; background: #ffea00; border-radius: 50%; display: none; justify-content: center; align-items: center; animation: bounce 1s infinite; }
@keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

/* Overlay Screens */
.hidden { display: none !important; }
.overlay-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.95); display: flex; flex-direction: column;
    justify-content: center; align-items: center; z-index: 100;
}
button { margin: 10px; padding: 15px 30px; font-size: 1.2rem; background: white; border: none; border-radius: 5px; font-weight: bold; }